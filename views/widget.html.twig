{% block login_form %}
<!--.login-form-->
<div class="row login-form">
  <div class="col-md-4 col-md-offset-4">
    <!--.panel-->
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Login</h3>
      </div>
      <div class="panel-body">
        <!--form-->
        <form role="form" action="{{ path('authenticate') }}" method="post">
          {% if error %}
          <div class="alert alert-dismissable alert-danger">
          <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
          {{ error }}
          </div>
          {% endif %}
          <div class="form-group">
            <label for="username">{% if app['silex_user.email_as_identity'] %}Email{% else %}Username{% endif %}</label>
            <input type="text" class="form-control" id="username" name="_username" value="{{ last_username }}">
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            <input type="password" class="form-control" id="password" name="_password" value="">
          </div>
          <button type="submit" class="btn">Login</button>
        </form>
        <!--/form-->
      </div>
    </div>
    <!--/.panel-->
  </div>
</div>
<!--/.login-form-->
{% endblock %}

{% block registration_form %}
{% form_theme form _self %}

<!--.registration-form-->
<div class="row registration-form">
  <div class="col-md-4 col-md-offset-4">
    <!--.panel-->
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Register</h3>
      </div>
      <div class="panel-body">
        <!--form-->
        {{ form_start(form) }}
          {% if form.vars.errors %}
          <div class="alert alert-dismissable alert-danger">
          <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
          {{ form.vars.errors|slice(0, 1) }}
          </div>
          {% endif %}

          {% for child in form %}
            {% if child.vars.name  == 'password' %}
              {{ form_row(child.first) }}
              {{ form_row(child.second) }}
            {% elseif child.vars.name != '_token' %}
              {{ form_row(child) }}
            {% endif %}
          {% endfor %}
          <button type="submit" class="btn">Submit</button>
        {{ form_end(form) }}
        <!--/form-->
      </div>
    </div>
    <!--/.panel-->
  </div>
</div>
<!--/.registration-form-->
{% endblock %}

{% block form_row %}
{% spaceless %}
  <div class="form-group{% if errors|length > 0 %} has-error{% endif %}">
    {{ form_label(form) }}
    {{ form_widget(form, { attr: { class: 'form-control' } }) }}
    {{ form_errors(form) }}
  </div>
{% endspaceless %}
{% endblock form_row %}

{% block form_errors %}
{% spaceless %}
    {% if errors|length > 0 %}
    {% set error = errors|first %}
    <span class="help-block">{{ error.message }}</span>
    {% endif %}
{% endspaceless %}
{% endblock form_errors %}
